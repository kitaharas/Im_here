<header>
  <section id="modal" class="hidden">
    <div class="container">
      <ul class="modal-ul">
        <li class="login-li">
        
            <div style="height:26px;">
              <p class="form-error" style="color:red; text-align:center;">emailもしくはpasswordに誤りがあります</p>
            </div>
   





<%# ajax実装 %>


  <div class="login_container">
    <input type="text" size="25" name="session[email]" id="user_email" placeholder="EMAIL">
    <input type="text" size="25" name="session[password]" id ="user_password" placeholder="PASSWORD" >
    <input type="submit" id="btn_submit" name="commit" value="log in!" data-disable-with="Create User">
  </div>

  <%# <% @users.each do |user| %/>
    <%= user.name %/><br>
  <% end %/> %>

  <script>
    $("#btn_submit").click(function(){
      const email = $("#user_email").val();
      const password = $("#user_password").val();
      $.ajax({
        type: 'POST', //post,get
        url: "/sessions/create",
        data: {email: email, password: password},//user[name]
        dataType: "json",
        beforeSend: function(xhr) {
            xhr.setRequestHeader("X-CSRF-Token", $('meta[name="csrf-token"]').attr('content'))
        },
      }).done(function(data){
        
        console.log(data.error);
        if (data.message === "error"){
          console.log("unko");
          $(".form-error").addClass('error-message');
        } else if (data.message === "success"){
          window.location.replace('<%= root_path %>');
        } 
        
        //alert(data.user.name + "で登録されました！")

      });
      // console.log($("#user_name").val());
    });
  </script>



<%# 
          <%= form_for(:session, url: login_path , html: { class: "login_container" }) do |f| %/>
            <input type="text" size="25" placeholder="EMAIL" name="session[email]">
            <input type="text" size="25" placeholder="PASSWORD" name="session[password]">
            <input type="submit"  value="log in!">
          </% end %/> %>
              <p class="signup-text">新規登録は<span onclick="SignUpPage()"><a>コチラ</a></span></p>
        </li>
        <li class="sign-up-li">
          <p>Sign Up!</p>
          <%= form_for(@user, html: { class: "login_container"}) do |f| %>
          <%= render 'shared/error_messages' %>
          <input type="text" size="25" placeholder="NAME" name="user[name]"  >
          <input type="text" size="25" placeholder="EMAIL" name="user[email]" >
          <input type="password" size="25" placeholder="PASSWORD" name="user[password]" autocomplete="off">
          <input type="password" size="25" placeholder="PASSWORD" name="user[password_confirmation]" autocomplete="off">
          <input type="submit"  value="sign up!" >
          <% end %>
          <%# onclick="SignUpGaid();return false;" %>
        </li>
        <li id="signup-about">
          <div class="list-area">
            <h2><img src="/assets/logo.png"></h2>
            <p>は誰でも&nbsp;誰とでも繋がれるコミュニティツールです!</p>
          </div>
        </li>
        <li id="signup-about2">
          <div class="list-area2">
            <h2><img src="/assets/logo.png"></h2>
            <p>を使って、レッスンに参加したり、<br>
              自分の演奏を披露したりすることが出来ます。
            </p>
            <p>
              また、新たなコミュニティを通じて自身の可能性を<br>
              見出すこともできるかも知れません。
            </p>
            <p>
              チャットや音声で、ただ会話を楽しむ事も<br>
              それはあなたのライフスタイルの一部になってくれるでしょう。
            </p>
          </div>
        </li>
        <li id="signup-about3">
          <div class="list-area3">
            <h2><img src="/assets/logo.png"></h2>
            <p>を通じて、</p>
            <p>あなたの世界が少しでも広がる事を</p>
            <p>願っています。</p>
            <button class="btn-go">Go!</button>
          </div>
        </li>
      
  
      </ul>
        
    </div>
    <button id="prev" class="hidden">←戻る</button>
    <button id="next" class="hidden">進む→</button>
    <div id="close">
      閉じる
    </div>
  </section>
  <div id="mask" class="hidden"></div>
  
  
  <div class="status_bar">
    <% if @error_message %>
      <div class="form-error">
        <%= @error_message %>
      </div>
    <% end %>
    <form method="get" action="#" class="search_container">
      <input type="text" size="25" placeholder="キーワード検索">
      <input type="submit"  value="&#xf002">
    </form>
    
    <div class="status_bar_right">
        <%= link_to image_tag("/assets/login.png"), root_path ,class:"acount-logo" %>
          <% if logged_in? %>
            <%= link_to "Log out", logout_path, method: :delete %>
          <% else %>
            <span onclick="LoginPage()"><%= link_to "Log in", "#" %></span>
          <% end %>
        <ul>
          <li><%= link_to image_tag("/assets/facebook.png"),'https://www.facebook.com/' %></li>
          <li><%= link_to image_tag("/assets/Messenger.png"),'https://www.facebook.com/messenger/' %></li>
          <li><%= link_to image_tag("/assets/insta.png"),'https://www.instagram.com/' %></li>
          <li><%= link_to image_tag("/assets/twitter.png"),'https://www.twitter.com/' %></li>
        </ul>
    </div>
  </div>
  <div class="global-menu">
    <h1 class="main-logo"><%= link_to image_tag("/assets/logo.png"), root_path %></h1>
    <div class="menu">
      <ul>
        <li><%= link_to "about", about_path %></li>
        <li><%= link_to "ジャンル別", genre_path %></li>
        <li><%= link_to "気分別", feel_path %></li>
        <li id="signup-btn" onclick="SignUpPage()"><a id="signup">新規登録</a></li>
      </ul>
    </div>
  </div>
</header>